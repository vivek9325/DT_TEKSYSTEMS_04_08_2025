{"version":"7","defaultTimeframe":{"from":"now()-24h","to":"now()"},"defaultSegments":[],"sections":[{"id":"f740a363-459b-4cb9-af50-8f1e96dee8a2","type":"markdown","markdown":"# **Apache logs**\n\n--- \n\nThese [logs](https://httpd.apache.org/docs/2.4/logs.html) are records maintained by the Apache HTTP Server to capture details about client requests, server activity, and errors. They are essential for monitoring performance, diagnosing issues, and enhancing security. The two most common types are access logs and error logs. Access logs record every incoming HTTP request, typically stored in `/var/log/apache2/access.log` on Debian/Ubuntu or `/var/log/httpd/access_log` on RHEL/CentOS systems. They often use the Common or Combined Log Format, which includes information such as the client IP address, user identity, timestamp, HTTP method, requested resource, protocol version, status code, and response size. The Combined Log Format also logs the referer and user-agent details. Error logs, found in /var/log/apache2/error.log or /var/log/httpd/error_log, store server-related error messages, warnings, and startup/shutdown events. Each entry usually contains the timestamp, module and severity level, process ID, client information, and a descriptive error message. Beyond these, Apache may also produce specialized logs such as mod_security audit logs, virtual host-specific logs, or custom logs defined through configuration directives like CustomLog and ErrorLog. Administrators often use commands such as tail -f to monitor logs in real time, grep to search for specific errors, or awk to analyze request patterns by IP. Together, these logs form a vital part of web server management, enabling proactive issue detection and detailed forensic analysis."},{"id":"7d0d20b0-4a7f-46be-9929-1af184c18bf1","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status LD\"\n| summarize numOf200Errors=countIf(status==200), numOf404Errors=countIf(status==404), \nnumOf301Errors=countIf(status==301), numOf206Errors=countIf(status==206), numOf403Errors=countIf(status==403), by:{clientip}\n| limit 10"},"visualizationSettings":{"thresholds":[],"unitsOverrides":[{"identifier":null,"unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1755054687177}],"chartSettings":{"truncationMode":"middle","legend":{"position":"bottom"},"colorPalette":"apdex-inverted","circleChartSettings":{"valueType":"relative"}}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"pieChart","result":{"code":200,"value":{"records":[{"clientip":"1.22.35.226","numOf200Errors":"6","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"2.38.110.208","numOf200Errors":"1","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"2.51.241.128","numOf200Errors":"2","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"2.85.194.19","numOf200Errors":"1","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"2.137.32.153","numOf200Errors":"6","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"2.179.147.248","numOf200Errors":"1","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"2.241.35.167","numOf200Errors":"29","numOf404Errors":"0","numOf301Errors":"3","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"5.0.46.207","numOf200Errors":"1","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"5.9.143.150","numOf200Errors":"0","numOf404Errors":"1","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"},{"clientip":"5.10.83.21","numOf200Errors":"4","numOf404Errors":"0","numOf301Errors":"0","numOf206Errors":"0","numOf403Errors":"0"}],"types":[{"indexRange":[0,9],"mappings":{"clientip":{"type":"ip_address"},"numOf200Errors":{"type":"long"},"numOf404Errors":{"type":"long"},"numOf301Errors":{"type":"long"},"numOf206Errors":{"type":"long"},"numOf403Errors":{"type":"long"}}}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status LD\"\n| summarize by:{clientip}, {numOf200Errors = countIf(status == 200), numOf404Errors = countIf(status == 404), numOf301Errors = countIf(status == 301), numOf206Errors = countIf(status == 206), numOf403Errors = countIf(status == 403)}\n| limit 10","timezone":"Asia/Calcutta","query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status LD\"\n| summarize numOf200Errors=countIf(status==200), numOf404Errors=countIf(status==404), \nnumOf301Errors=countIf(status==301), numOf206Errors=countIf(status==206), numOf403Errors=countIf(status==403), by:{clientip}\n| limit 10","scannedRecords":14149,"dqlVersion":"V1_0","scannedBytes":5031505,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-08-06T03:30:25.594000000Z","end":"2025-08-13T03:30:25.594000000Z"},"locale":"en-US","executionTimeMilliseconds":25,"notifications":[{"severity":"INFO","messageFormat":"The parameters should be grouped with curly braces: {}.","syntaxPosition":{"start":{"column":13,"index":160,"line":4},"end":{"column":109,"index":343,"line":5}},"messageFormatSpecifierTypes":[],"arguments":[],"notificationType":"PARAMETERS_SHOULD_BE_GROUPED","message":"The parameters should be grouped with curly braces: {}."}],"queryId":"c2b15659-f16a-4757-9f3e-7242abf1345a","sampled":false}}},"notifications":[{"severity":"info","messageFormat":"The parameters should be grouped with curly braces: {}.","syntaxPosition":{"start":{"column":13,"index":160,"line":4},"end":{"column":109,"index":343,"line":5}},"messageFormatSpecifierTypes":[],"arguments":[],"notificationType":"PARAMETERS_SHOULD_BE_GROUPED","message":"The parameters should be grouped with curly braces: {}."}],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:30:26.289Z","input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status LD\"\n| summarize numOf200Errors=countIf(status==200), numOf404Errors=countIf(status==404), \nnumOf301Errors=countIf(status==301), numOf206Errors=countIf(status==206), numOf403Errors=countIf(status==403), by:{clientip}\n| limit 10"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true},"enabled":false,"componentState":{"inputData":{"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"2025-08-06T03:13:00.007Z","endTime":"2025-08-13T03:13:00.007Z"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status LD\"\n| summarize numOf200Errors=countIf(status==200), numOf404Errors=countIf(status==404), numOf301Errors=countIf(status==301), numOf206Errors=countIf(status==206), numOf403Errors=countIf(status==403), by:{clientip}\n| limit 10","numberOfSignalFluctuations":1,"alertCondition":"ABOVE","alertOnMissingData":true,"violatingSamples":3,"slidingWindow":5,"dealertingSamples":5}},"lastExecution":{"analyzerName":"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer","inputData":{"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer":{"generalParameters":{"timeframe":{"startTime":"2025-08-06T03:13:00.007Z","endTime":"2025-08-13T03:13:00.007Z"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status LD\"\n| summarize numOf200Errors=countIf(status==200), numOf404Errors=countIf(status==404), numOf301Errors=countIf(status==301), numOf206Errors=countIf(status==206), numOf403Errors=countIf(status==403), by:{clientip}\n| limit 10","numberOfSignalFluctuations":1,"alertCondition":"ABOVE","alertOnMissingData":true,"violatingSamples":3,"slidingWindow":5,"dealertingSamples":5}}},"resultState":{},"analyzerHints":{},"selectedAnalyzerName":"dt.statistics.ui.anomaly_detection.AutoAdaptiveAnomalyDetectionAnalyzer"}}}},{"id":"98c41547-4b3b-4ed5-bfd4-e1748ea7eb6f","type":"dql","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":290,"state":{"input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status SPACE INT LD:url\"\n| parse url, \"LD SPACE LD:useragent\"\n| parse useragent, \"DQS:useragent\"\n| summarize total_count=count(), by:{clientip,useragent}\n| filterOut useragent==\"-\"\n| sort - total_count\n| filter isNotNull(useragent)\n| limit 10"},"visualizationSettings":{"thresholds":[],"table":{"columnOrder":["[\"clientip\"]","[\"useragent\"]","[\"total_count\"]"]},"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","result":{"code":200,"value":{"records":[{"clientip":"46.105.14.53","useragent":"UniversalFeedParser/4.2-pre-314-svn +http://feedparser.org/","total_count":"364"},{"clientip":"130.237.218.86","useragent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.91 Safari/537.36","total_count":"293"},{"clientip":"66.249.73.135","useragent":"Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","total_count":"211"},{"clientip":"66.249.73.135","useragent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","total_count":"207"},{"clientip":"50.16.19.13","useragent":"Tiny Tiny RSS/1.11 (http://tt-rss.org/)","total_count":"113"},{"clientip":"68.180.224.225","useragent":"Mozilla/5.0 (compatible; Yahoo! Slurp; http://help.yahoo.com/help/us/ysearch/slurp)","total_count":"95"},{"clientip":"75.97.9.59","useragent":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.107 Safari/537.36","total_count":"92"},{"clientip":"198.46.149.143","useragent":"Tiny Tiny RSS/1.11 (http://tt-rss.org/)","total_count":"82"},{"clientip":"208.115.111.72","useragent":"Mozilla/5.0 (compatible; Ezooms/1.0; help@moz.com)","total_count":"73"},{"clientip":"208.115.113.88","useragent":"Mozilla/5.0 (compatible; Ezooms/1.0; help@moz.com)","total_count":"66"}],"types":[{"indexRange":[0,9],"mappings":{"clientip":{"type":"ip_address"},"useragent":{"type":"string"},"total_count":{"type":"long"}}}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status SPACE INT LD:url\"\n| parse url, \"LD SPACE LD:useragent\"\n| parse useragent, \"DQS:useragent\"\n| summarize by:{clientip, useragent}, total_count = count()\n| filterOut useragent == \"-\"\n| sort -total_count\n| filter isNotNull(useragent)\n| limit 10","timezone":"Asia/Calcutta","query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status SPACE INT LD:url\"\n| parse url, \"LD SPACE LD:useragent\"\n| parse useragent, \"DQS:useragent\"\n| summarize total_count=count(), by:{clientip,useragent}\n| filterOut useragent==\"-\"\n| sort - total_count\n| filter isNotNull(useragent)\n| limit 10","scannedRecords":14149,"dqlVersion":"V1_0","scannedBytes":5031505,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-08-06T03:30:25.607000000Z","end":"2025-08-13T03:30:25.607000000Z"},"locale":"en-US","executionTimeMilliseconds":26,"notifications":[],"queryId":"98935492-0f9a-4b1d-a37c-a7d15431adb1","sampled":false}}},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:30:26.363Z","input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE ']' LD 'HTTP/' LD SPACE INT:status SPACE INT LD:url\"\n| parse url, \"LD SPACE LD:useragent\"\n| parse useragent, \"DQS:useragent\"\n| summarize total_count=count(), by:{clientip,useragent}\n| filterOut useragent==\"-\"\n| sort - total_count\n| filter isNotNull(useragent)\n| limit 10"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"355042a1-698f-45ae-a8b9-8b3638eaf500","type":"dql","title":"Explore metrics","queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"dt.billing.infrastructure_monitoring.usage","aggregation":"sum"},"by":["metric.key"],"filter":""}],"globalCommands":{"limit":10,"sort":{"field":"value.A","direction":"desc"},"interval":"1h"}},"filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"previousQueryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"dt.billing.infrastructure_monitoring.usage","aggregation":"sum"},"by":["metric.key"],"filter":""}],"globalCommands":{"limit":10,"sort":{"field":"value.A","direction":"desc"},"interval":"1h"}},"state":{"input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"timeseries { sum(dt.billing.infrastructure_monitoring.usage), value.A = avg(dt.billing.infrastructure_monitoring.usage, scalar: true) }, interval: 1h, by: { metric.key }\n| sort value.A desc\n| limit 10"},"visualizationSettings":{"thresholds":[],"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"lineChart","result":{"code":200,"value":{"records":[{"timeframe":{"start":"2025-08-06T08:30:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"3600000000000","metric.key":"dt.billing.infrastructure_monitoring.usage","sum(dt.billing.infrastructure_monitoring.usage)":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"value.A":0}],"types":[{"indexRange":[0,0],"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"metric.key":{"type":"string"},"sum(dt.billing.infrastructure_monitoring.usage)":{"type":"array","types":[{"indexRange":[0,168],"mappings":{"element":{"type":"double"}}}]},"value.A":{"type":"double"}}}],"metadata":{"grail":{"canonicalQuery":"timeseries by:{metric.key}, interval:1h, {sum(dt.billing.infrastructure_monitoring.usage), value.A = avg(dt.billing.infrastructure_monitoring.usage, scalar:TRUE)}\n| sort value.A desc\n| limit 10","timezone":"Asia/Calcutta","query":"timeseries { sum(dt.billing.infrastructure_monitoring.usage), value.A = avg(dt.billing.infrastructure_monitoring.usage, scalar: true) }, interval: 1h, by: { metric.key }\n| sort value.A desc\n| limit 10","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":75,"analysisTimeframe":{"start":"2025-08-06T03:00:00.000000000Z","end":"2025-08-13T04:00:00.000000000Z"},"locale":"en-US","executionTimeMilliseconds":22,"notifications":[],"queryId":"7ee8b83a-9209-42c9-bd5a-f1fd157afa43","sampled":false},"metrics":[{"metric.key":"dt.billing.infrastructure_monitoring.usage","displayName":"(DPS) Infrastructure Monitoring billing usage","description":"The total number of host-hours being monitored in infrastructure-only mode, counted in 15 min intervals. Use this total metric to query longer timeframes without losing precision or performance. For details on the hosts causing the usage, refer to the usage_per_host metric.","unit":"count","fieldName":"sum(dt.billing.infrastructure_monitoring.usage)"},{"metric.key":"dt.billing.infrastructure_monitoring.usage","displayName":"(DPS) Infrastructure Monitoring billing usage","description":"The total number of host-hours being monitored in infrastructure-only mode, counted in 15 min intervals. Use this total metric to query longer timeframes without losing precision or performance. For details on the hosts causing the usage, refer to the usage_per_host metric.","unit":"count","fieldName":"value.A","scalar":true}]}},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:30:26.330Z","input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"timeseries { sum(dt.billing.infrastructure_monitoring.usage), value.A = avg(dt.billing.infrastructure_monitoring.usage, scalar: true) }, interval: 1h, by: { metric.key }\n| sort value.A desc\n| limit 10"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"9397010c-59e5-457a-93dc-df779bb2de45","type":"dql","title":"Explore logs","queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"logs","summarize":{"fields":[],"aggregator":"count"},"filter":"log.source = sample_lookup.csv "}],"globalCommands":{"limit":20}},"filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"previousQueryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"logs","summarize":{"fields":[],"aggregator":"count"},"filter":"log.source = sample_lookup.csv "}],"globalCommands":{"limit":20}},"state":{"input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"fetch logs\n| filter matchesValue(log.source, \"sample_lookup.csv\")\n| summarize count = count()\n| limit 20"},"visualizationSettings":{"thresholds":[{"id":1,"field":"count","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"≥","label":"","value":50},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":"","value":90}]}],"unitsOverrides":[{"identifier":"count","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1755056615067}],"singleValue":{"showLabel":false,"isIconVisible":true,"colorThresholdTarget":"background","trend":{"isVisible":true,"trendField":"count"}},"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"singleValue","result":{"code":200,"value":{"records":[{"count":"100"}],"types":[{"indexRange":[0,0],"mappings":{"count":{"type":"long"}}}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| filter matchesValue(log.source, \"sample_lookup.csv\")\n| summarize count = count()\n| limit 20","timezone":"Asia/Calcutta","query":"fetch logs\n| filter matchesValue(log.source, \"sample_lookup.csv\")\n| summarize count = count()\n| limit 20","scannedRecords":767,"dqlVersion":"V1_0","scannedBytes":199502,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-08-06T03:41:08.390000000Z","end":"2025-08-13T03:41:08.391000000Z"},"locale":"en-US","executionTimeMilliseconds":21,"notifications":[{"severity":"WARNING","messageFormat":"The result of the previous command always contains only one record. Limiting will not have an effect.","syntaxPosition":{"start":{"column":3,"index":96,"line":4},"end":{"column":10,"index":103,"line":4}},"messageFormatSpecifierTypes":[],"arguments":[],"notificationType":"SINGLE_RECORD_LIST_ON_ROOT","message":"The result of the previous command always contains only one record. Limiting will not have an effect."}],"queryId":"6b75278f-b814-421b-b6d1-4ae17e5894df","sampled":false}}},"notifications":[{"severity":"warning","messageFormat":"The result of the previous command always contains only one record. Limiting will not have an effect.","syntaxPosition":{"start":{"column":3,"index":96,"line":4},"end":{"column":10,"index":103,"line":4}},"messageFormatSpecifierTypes":[],"arguments":[],"notificationType":"SINGLE_RECORD_LIST_ON_ROOT","message":"The result of the previous command always contains only one record. Limiting will not have an effect."}],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:41:09.032Z","input":{"timeframe":{"from":"now()-7d","to":"now()"},"value":"fetch logs\n| filter matchesValue(log.source, \"sample_lookup.csv\")\n| summarize count = count()\n| limit 20"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"4dce3bee-b0cb-419a-98c1-9ab5ea368c1c","type":"dql","title":"Explore Events","queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"events","makeTimeseries":{"aggregator":"count","fields":["host.name"]},"filter":"host.name = ip-172-31-38-208.ec2.internal "}],"globalCommands":{}},"filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"previousQueryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"events","makeTimeseries":{"aggregator":"count","fields":["host.name"]},"filter":"host.name = ip-172-31-38-208.ec2.internal "}],"globalCommands":{}},"state":{"input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"fetch events\n| filter matchesValue(host.name, \"ip-172-31-38-208.ec2.internal\")\n| makeTimeseries count = count(), by: { host.name }"},"visualizationSettings":{"thresholds":[],"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"lineChart","result":{"code":200,"value":{"records":[{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","host.name":"ip-172-31-38-208.ec2.internal","count":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,6,9,10,10,10,10,9,10,10,10,10,8,9,10,10,10,9,10,9,9,10,9,10,10,10,10,10,10,9,9,10,10,9,10,8,null,null,null,null]},{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","host.name":["ip-172-31-38-208.ec2.internal"],"count":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,1,null]}],"types":[{"indexRange":[0,0],"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"host.name":{"type":"string"},"count":{"type":"array","types":[{"indexRange":[0,144],"mappings":{"element":{"type":"double"}}}]}}},{"indexRange":[1,1],"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"host.name":{"type":"array","types":[{"indexRange":[0,0],"mappings":{"element":{"type":"string"}}}]},"count":{"type":"array","types":[{"indexRange":[0,144],"mappings":{"element":{"type":"double"}}}]}}}],"metadata":{"grail":{"canonicalQuery":"fetch events\n| filter matchesValue(host.name, \"ip-172-31-38-208.ec2.internal\")\n| makeTimeseries by:{host.name}, count = count()","timezone":"Asia/Calcutta","query":"fetch events\n| filter matchesValue(host.name, \"ip-172-31-38-208.ec2.internal\")\n| makeTimeseries count = count(), by: { host.name }","scannedRecords":337,"dqlVersion":"V1_0","scannedBytes":471298,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-08-12T03:52:01.030000000Z","end":"2025-08-13T03:52:01.030000000Z"},"locale":"en-US","executionTimeMilliseconds":29,"notifications":[],"queryId":"31a11e6a-ba2c-4910-9b11-44bca8f5586c","sampled":false}}},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:52:01.672Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"fetch events\n| filter matchesValue(host.name, \"ip-172-31-38-208.ec2.internal\")\n| makeTimeseries count = count(), by: { host.name }"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"7df5c24b-cc3e-4df5-b3e8-3daed7caf302","type":"function","showTitle":false,"drilldownPath":[],"height":104,"state":{"input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"/*\n* This function will run in the DYNATRACE JavaScript runtime.\n* For information visit https://dt-url.net/functions-help\n*/\nexport default async function () {\n  return \"Hello, world!\";\n}"},"visualizationSettings":{"thresholds":[],"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"state":"success","result":{"code":200,"value":"Hello, world!","notifications":[],"logs":"","dateTime":"2025-08-13T03:56:48.226Z","input":{"timeframe":{"from":"now()-2h","to":"now()"},"value":"/*\n* This function will run in the DYNATRACE JavaScript runtime.\n* For information visit https://dt-url.net/functions-help\n*/\nexport default async function () {\n  return \"Hello, world!\";\n}"}},"visualization":"table"}},{"id":"6df0afe0-6f62-48a2-a447-384f96836079","type":"dql","title":"Chart average CPU across all hosts","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"timeseries avg(dt.host.cpu.usage)"},"visualizationSettings":{"thresholds":[],"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"lineChart","result":{"code":200,"value":{"records":[{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","avg(dt.host.cpu.usage)":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,5.814895248413086,4.484702682495117,4.309094746907552,4.552635574340821,4.609832000732422,4.724416732788086,4.498209889729818,4.666601943969726,4.401712290445963,4.204480616251628,4.357728322347005,4.176767603556315,4.49222780863444,4.397126770019531,4.206748326619466,4.3992774963378904,4.346219889322916,4.452969233194987,4.427351252237956,4.267655563354492,4.3574169158935545,4.480207951863607,4.36553955078125,4.593087514241536,4.358932367960612,4.277756881713867,4.2932484944661455,4.488835144042969,4.275877380371094,4.339409383138021,4.295708592732748,4.467641830444336,4.346106847127278,4.481783548990886,4.332991282145183,4.417389297485352,4.169717788696289,4.365247472127279,4.473538080851237,4.514126968383789,4.390235137939453,3.991338602701823,4.259828567504883,4.213240559895834,4.278900400797526,4.233237330118815,4.362940046522352,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3.7071269353230796,3.755682881673177,3.6662220001220702,3.79484494527181,3.831293233235677,3.7843645731608073,3.76985600789388,3.5994664510091146,3.6412691752115887,3.5632047017415363]}],"types":[{"indexRange":[0,0],"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"avg(dt.host.cpu.usage)":{"type":"array","types":[{"indexRange":[0,144],"mappings":{"element":{"type":"double"}}}]}}}],"metadata":{"grail":{"canonicalQuery":"timeseries avg(dt.host.cpu.usage)","timezone":"Asia/Calcutta","query":"timeseries avg(dt.host.cpu.usage)","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":432,"analysisTimeframe":{"start":"2025-08-12T03:50:00.000000000Z","end":"2025-08-13T04:00:00.000000000Z"},"locale":"en-US","executionTimeMilliseconds":25,"notifications":[],"queryId":"837cbe1d-b962-4794-80b5-6b0f92752a5f","sampled":false},"metrics":[{"metric.key":"dt.host.cpu.usage","fieldName":"avg(dt.host.cpu.usage)"}]}},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:57:09.404Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"timeseries avg(dt.host.cpu.usage)"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"bfd7e030-8a6e-4c24-8841-0ef2e2af2f8c","type":"dql","title":"Area chart (Logs by status)","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"state":{"input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"fetch logs\n| makeTimeseries count(), by:{status}"},"visualizationSettings":{"thresholds":[],"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"donutChart","result":{"code":200,"value":{"records":[{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","status":"ERROR","count()":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,2,null,null,2,null,null,2,null,null,2,null,2,null,null,2,null,21,2,null,null,2,null,null,2,null,2,null,null,2,null,null,2,null,null,2,null,2,null,null,2,null,null,2,null,null,2,null,null,2,null,null,2,null,2,null,null,null,null,null,2,null,null,null,null,1,2,null,null,null,null,2,null,null,null,null,null,2,null,null,null,null,null,2,null,null,null,null,null,2,1,null,null,null,null,2,null,null,null,null,null,2,null,null,null,null,3,null,null,null,null,null,2,null,null,null,null,null,2,null,null,2]},{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","status":"INFO","count()":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,22,6,9,9,6,19,9,7,9,9,6,9,15,17,12,6,107,12,6,6,12,6,6,48,15,10,9,15,10,34,6,9,9,24,41,61,19,6,33,18,8,6,9,6,9,51,6,6,19,6,18,10,6,9,6,7,9,7,6,19,6,9,11,6,9,18,7,9,10,6,40,6,18,11,9,6,19,6,6,17,11,6,9,6,9,6,9,16,9,7,6,16,9,6,9,6,9,15,9,16,9,6,6,15,10,11,6,6,6,15,10,9,6,6,6,6,12,47,7,6,18]},{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","status":"NONE","count()":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20,4,5,7,4,14,7,5,5,7,4,7,13,15,8,4,34,10,4,4,8,4,4,35,13,8,5,13,8,6,4,7,5,16,37,2408,10182,4,5,16,5,4,7,4,5,40,4,4,17,4,14,8,4,7,4,4,5,5,4,17,4,4,5,4,4,16,5,4,5,4,7,4,13,5,5,4,17,4,4,13,7,4,7,4,7,4,5,14,7,4,4,14,5,4,7,4,5,13,5,14,7,4,4,13,6,8,4,4,4,13,6,7,4,4,4,4,6,34,105,4,16]},{"timeframe":{"start":"2025-08-12T09:20:00.000000000+05:30","end":"2025-08-13T09:30:00.000000000+05:30"},"interval":"600000000000","status":"WARN","count()":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,1,null,null,1,null,null,1,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,1,null,null,1,null,null,1,null,null,9,12,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1]}],"types":[{"indexRange":[0,3],"mappings":{"timeframe":{"type":"timeframe"},"interval":{"type":"duration"},"status":{"type":"string"},"count()":{"type":"array","types":[{"indexRange":[0,144],"mappings":{"element":{"type":"double"}}}]}}}],"metadata":{"grail":{"canonicalQuery":"fetch logs\n| makeTimeseries by:{status}, count()","timezone":"Asia/Calcutta","query":"fetch logs\n| makeTimeseries count(), by:{status}","scannedRecords":15361,"dqlVersion":"V1_0","scannedBytes":8631574,"scannedDataPoints":0,"analysisTimeframe":{"start":"2025-08-12T03:57:41.418000000Z","end":"2025-08-13T03:57:41.418000000Z"},"locale":"en-US","executionTimeMilliseconds":31,"notifications":[],"queryId":"f9fcd046-30f5-4ad7-947c-dba5431a2005","sampled":false}}},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:57:42.056Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"fetch logs\n| makeTimeseries count(), by:{status}"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}},{"id":"7565ba2c-41d2-4a95-8a17-564da3f5547b","type":"dql","title":"Choropleth (Apdex representation by country)","filterSegments":[],"drilldownPath":[],"previousFilterSegments":[],"height":798,"state":{"input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"data\n    record(country_code = \"US-TX\", apdex = \"Unacceptable\"),\n    record(country_code = \"ES-AN\", apdex = \"Unacceptable\"),\n    record(country_code = \"GB\", apdex = \"Excellent\"),\n    record(country_code = \"DE\", apdex = \"Poor\"),\n    record(country_code = \"FR\", apdex = \"Fair\"),\n    record(country_code = \"IT\", apdex = \"Fair\"),\n    record(country_code = \"CN\", apdex = \"Unacceptable\"),\n    record(country_code = \"JP\", apdex = \"Excellent\"),\n    record(country_code = \"IN\", apdex = \"Good\"),\n    record(country_code = \"BR\", apdex = \"Fair\")"},"visualizationSettings":{"thresholds":[],"chartSettings":{}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"choropleth","result":{"code":200,"value":{"records":[{"country_code":"US-TX","apdex":"Unacceptable"},{"country_code":"ES-AN","apdex":"Unacceptable"},{"country_code":"GB","apdex":"Excellent"},{"country_code":"DE","apdex":"Poor"},{"country_code":"FR","apdex":"Fair"},{"country_code":"IT","apdex":"Fair"},{"country_code":"CN","apdex":"Unacceptable"},{"country_code":"JP","apdex":"Excellent"},{"country_code":"IN","apdex":"Good"},{"country_code":"BR","apdex":"Fair"}],"types":[{"indexRange":[0,9],"mappings":{"country_code":{"type":"string"},"apdex":{"type":"string"}}}],"metadata":{"grail":{"canonicalQuery":"data record(country_code = \"US-TX\", apdex = \"Unacceptable\"), record(country_code = \"ES-AN\", apdex = \"Unacceptable\"), record(country_code = \"GB\", apdex = \"Excellent\"), record(country_code = \"DE\", apdex = \"Poor\"), record(country_code = \"FR\", apdex = \"Fair\"), record(country_code = \"IT\", apdex = \"Fair\"), record(country_code = \"CN\", apdex = \"Unacceptable\"), record(country_code = \"JP\", apdex = \"Excellent\"), record(country_code = \"IN\", apdex = \"Good\"), record(country_code = \"BR\", apdex = \"Fair\")","timezone":"Asia/Calcutta","query":"data\n    record(country_code = \"US-TX\", apdex = \"Unacceptable\"),\n    record(country_code = \"ES-AN\", apdex = \"Unacceptable\"),\n    record(country_code = \"GB\", apdex = \"Excellent\"),\n    record(country_code = \"DE\", apdex = \"Poor\"),\n    record(country_code = \"FR\", apdex = \"Fair\"),\n    record(country_code = \"IT\", apdex = \"Fair\"),\n    record(country_code = \"CN\", apdex = \"Unacceptable\"),\n    record(country_code = \"JP\", apdex = \"Excellent\"),\n    record(country_code = \"IN\", apdex = \"Good\"),\n    record(country_code = \"BR\", apdex = \"Fair\")","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":0,"locale":"en-US","executionTimeMilliseconds":3,"notifications":[],"queryId":"57a43968-4d3e-488f-b4c7-4006a43742a4","sampled":false}}},"notifications":[],"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"dateTime":"2025-08-13T03:58:24.176Z","input":{"timeframe":{"from":"now()-24h","to":"now()"},"value":"data\n    record(country_code = \"US-TX\", apdex = \"Unacceptable\"),\n    record(country_code = \"ES-AN\", apdex = \"Unacceptable\"),\n    record(country_code = \"GB\", apdex = \"Excellent\"),\n    record(country_code = \"DE\", apdex = \"Poor\"),\n    record(country_code = \"FR\", apdex = \"Fair\"),\n    record(country_code = \"IT\", apdex = \"Fair\"),\n    record(country_code = \"CN\", apdex = \"Unacceptable\"),\n    record(country_code = \"JP\", apdex = \"Excellent\"),\n    record(country_code = \"IN\", apdex = \"Good\"),\n    record(country_code = \"BR\", apdex = \"Fair\")"}},"state":"success","davis":{"includeLogs":true,"davisVisualization":{"isAvailable":true}}}}]}