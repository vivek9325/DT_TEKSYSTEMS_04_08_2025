{"version":19,"variables":[{"key":"Status","visible":true,"type":"query","version":1,"editable":true,"input":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE:date ']' LD:url 'HTTP/' LD SPACE INT:status LD\"\n|summarize count=count(), by:{status}\n| fieldsRemove count","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]}],"tiles":{"1":{"title":"Total errors","type":"data","query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE:date ']' LD:url 'HTTP/' LD SPACE INT:status LD\"\n|summarize numOf200Errors=countIf(status==200), numOf404Errors=countIf(status==404), numOf301Errors=countIf(status==301),\nnumOf206Errors=countIf(status==206), numOf403Errors=countIf(status==403) ,by:{clientip}\n| limit 10","visualization":"categoricalBarChart","visualizationSettings":{"autoSelectVisualization":false,"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"vertical","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"blue-steel","valueRepresentation":"absolute","truncationMode":"end","legend":{"hidden":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["content"],"id":1754939618743,"value":"log-content"}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"end","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"orange-petrol-inverted"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"end"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"now()-7d","to":"now()"}}},"2":{"title":"Top Client IP","type":"data","query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE:date ']' LD:url 'HTTP/' LD SPACE INT:status LD\"\n| filter in (status, Array($Status:noquote))\n//| filter status==$Status:noquote\n|summarize total_count=count() ,by:{clientip}\n| sort - total_count\n| limit 10\n","visualization":"pieChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"end"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"end","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"end"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"now()-7d","to":"now()"}}},"3":{"title":"Error count by domain","type":"data","query":"fetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE:date ']' LD:url 'HTTP/' LD SPACE INT:status SPACE INT SPACE LD:URL\"\n| parse URL, \"LD:referer_domain SPACE\"\n| parse referer_domain, \"DQS:referer_domain\"\n| parse referer_domain, \"'http://'LDATA:referer_dom'.com'\"\n| fieldsAdd referer_dom = concat(\"http://\",referer_dom,\".com\")\n| filterOut referer_dom==\"http://.com\"\n| summarize error_404_count=countIf(status==404), by:{clientip,referer_dom} \n| sort - error_404_count\n| limit 100","visualization":"table","visualizationSettings":{"autoSelectVisualization":false,"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"end"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["referer_dom"]],"monospacedFontEnabled":false,"monospacedFontColumns":[["error_404_count"]],"columnWidths":{"[\"error_404_count\"]":208,"[\"referer_dom\"]":285,"[\"clientip\"]":145},"columnTypeOverrides":[],"colorThresholdTarget":"value","enableThresholdInRow":false},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"end","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"end"},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"now()-7d","to":"now()"}}},"4":{"title":"Top 404 URLS with occurences","type":"data","query":"\nfetch logs\n| filter matchesValue(log.source, \"apache.log\")\n| parse content, \"IPADDR:clientip LD '[' HTTPDATE:date ']' LD:url 'HTTP/' LD SPACE INT:status LD\"\n| parse url,\"LD SPACE '/'LD:url\"\n| filter status==404\n| summarize total_count=count(), by:{url}\n| fieldsAdd url = concat(\"/\",url)\n| sort - total_count\n","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"end"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":true,"lineWrapIds":[["url"]],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{"[\"url\"]":495},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"end","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"end"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":true},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"now()-7d","to":"now()"}}}},"layouts":{"1":{"x":0,"y":7,"w":24,"h":8},"2":{"x":0,"y":0,"w":12,"h":7},"3":{"x":12,"y":0,"w":12,"h":7},"4":{"x":0,"y":15,"w":11,"h":5}},"importedWithCode":false,"settings":{"defaultTimeframe":{"value":{"from":"now()-7d","to":"now()"},"enabled":true},"defaultSegments":{"value":[],"enabled":false}}}